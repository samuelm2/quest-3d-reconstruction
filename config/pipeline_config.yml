yuv_to_rgb:
  blur_filter: False     # Enable image blur filtering
  blur_threshold: 50.0   # Threshold for blur detection using Laplacian variance
  exposure_filter: False       # Enable image exposure filtering
  exposure_threshold_low: 0.05  # Underexposure detection threshold
  exposure_threshold_high: 0.05 # Overexposure detection threshold

depth_to_linear:
  clip_near_m: 0.1 # Near clipping distance in meters for linear depth visualization
  clip_far_m: 3.0  # Far clipping distance in meters for linear depth visualization
  use_cache: True # Whether to use the depth dataset cache

reconstruction:
  device: "CUDA:0"  # Device to run Open3D Tensor operations (e.g., CUDA-enabled GPU)

  # pipeline
  use_dataset_cache: true  # Use preprocessed depth/color datasets if available
  estimate_depth_confidences: true  # Estimate depth confidence maps via multi-view geometric consistency
  optimize_depth_pose: true  # Optimize per-frame camera poses based on depth map consistency
  use_fragment_dataset_cache: true  # Use cached fragments if available
  use_optimized_dataset_cache: true  # Use cached optimized depth datasets if available
  use_colorless_vbg_cache: true  # Use precomputed TSDF (VoxelBlockGrid) without color
  visualize_colorless_pcd: true  # Visualize the integrated point cloud before color refinement
  optimize_color_pose: true  # Optimize the poses of color images via mesh-to-image alignment
  visualize_colored_mesh: true  # Visualize the colorized mesh after pose optimization
  sample_point_cloud_from_colored_mesh: true  # Sample a dense point cloud from the colored mesh
  points_per_vertex_ratio: 2.0  # Number of points to sample per mesh vertex
  render_color_aligned_depth: true  # Render synthetic depth maps aligned to the color images

  confidence_estimation:
    target_frame_range: 10  # Number of adjacent frames to compare for consistency
    depth_max: 3.0  # Maximum depth value considered during reprojection
    error_threshold: 0.05  # Distance threshold to consider a correspondence as inconsistent
    skip_if_output_dir_exists: true  # Recompute even if confidence output directory already exist
    use_multi_threading: true  # Enable multi-threaded confidence computation

  fragment_generation:
    fragment_size: 100  # Number of frames per fragment
    use_confidence_filtered_depth: true  # Use only confident depth pixels for pose estimation
    confidence_threshold: 0.05  # Minimum confidence score to keep a depth pixel
    depth_max: 3.0  # Max depth value used for fragment-level processing
    odometry_loop_interval: 10  # Frequency (in fragments) to check for loop closure
    overlap_ratio_threshold: 0.1  # Overlap ratio threshold to consider loop candidates
    loop_yaw_info_density_threshold: 0.3  # Threshold on image gradient information for loop matching
    dist_threshold: 0.07  # Max correspondence distance in loop constraint construction
    edge_prune_threshold: 0.25  # Threshold to prune weak edges in the fragment graph
    use_multi_threading: false

  fragment_pose_refinement:
    use_confidence_filtered_depth: true
    confidence_threshold: 0.05
    voxel_size: 0.01  # TSDF voxel size
    block_resolution: 16  # Resolution of each voxel block (in voxels)
    block_count: 50000  # Total number of blocks in the TSDF volume
    depth_max: 1.5
    trunc_voxel_multiplier: 8.0  # Truncation distance = multiplier * voxel size
    use_pre_filtering: true  # Pre-filter fragment alignments before ICP
    pre_filter_every_k_points: 30  # Sampling interval for pre-filtering
    pre_filter_max_corr_dist: 0.1
    pre_filter_inlier_rmse_threshold: 0.05
    pre_filter_fitness_threshold: 0.2
    icp_voxel_sizes: [0.05, 0.025, 0.0125]  # Coarse-to-fine ICP voxel pyramid
    max_corr_dists: [0.1, 0.05, 0.025]  # Correspondence search radii per level
    max_iterations: [50, 31, 14]  # Max iterations per level
    relative_fitnesses: [1e-6, 1e-6, 1e-6]  # Convergence criteria for fitness
    relative_rmses: [1e-6, 1e-6, 1e-6]  # Convergence criteria for RMSE
    icp_fitness_threshold: 0.2  # Minimum fitness to accept ICP result
    icp_inlier_rmse_threshold: 0.05  # RMSE threshold to accept ICP result
    dist_threshold: 0.07
    edge_prune_threshold: 0.25
    use_multi_threading: false

  depth_integration:
    use_confidence_filtered_depth: true
    confidence_threshold: 0.05
    voxel_size: 0.01
    block_resolution: 16
    block_count: 50000
    depth_max: 1.5
    trunc_voxel_multiplier: 8.0

  color_optimization:
    weight_threshold: 3.0  # Minimum TSDF weight to retain voxel during optimization
    estimated_vertex_number: -1  # Optional: estimate number of vertices (-1 to auto-compute)
    interval: 100  # Keyframe interval for color pose optimization
    max_iteration: 100  # Max number of iterations for pose refinement
    use_dataset_cache: true

  color_aligned_depth_rendering:
    weight_threshold: 3.0  # Minimum TSDF weight to extract mesh surface
    estimated_vertex_number: -1
    only_use_optimized_dataset: true